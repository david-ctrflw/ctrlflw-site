---
import '../styles/global.css'

interface Props {
  title: string;
  description?: string;
}

const { title, description = "AI-powered systems that scale your business" } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>

    <!-- Preload Inter font -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  </head>
  <body>
    <slot />

    <!-- GSAP for animations -->
    <script>
      import { gsap } from 'gsap';
      import { ScrollTrigger } from 'gsap/ScrollTrigger';

      gsap.registerPlugin(ScrollTrigger);

      // Animate fade-up elements
      document.addEventListener('DOMContentLoaded', () => {
        // Hero elements - animate immediately (no scroll trigger)
        const heroSection = document.querySelector('section');
        const heroFadeElements = heroSection?.querySelectorAll('.fade-up');

        heroFadeElements?.forEach((el, i) => {
          gsap.fromTo(el,
            { opacity: 0, y: 30 },
            {
              opacity: 1,
              y: 0,
              duration: 0.5,
              delay: i * 0.08,
              ease: 'power2.out'
            }
          );
        });

        // Rest of page - scroll triggered (skip first section)
        const otherFadeElements = document.querySelectorAll('section:not(:first-of-type) .fade-up');

        otherFadeElements.forEach((el) => {
          gsap.fromTo(el,
            { opacity: 0, y: 30 },
            {
              opacity: 1,
              y: 0,
              duration: 0.6,
              ease: 'power2.out',
              scrollTrigger: {
                trigger: el,
                start: 'top 95%',
                toggleActions: 'play none none none'
              }
            }
          );
        });

        // Animate cards with stagger
        const cards = document.querySelectorAll('.card');
        cards.forEach((card, i) => {
          gsap.fromTo(card,
            { opacity: 0, y: 40 },
            {
              opacity: 1,
              y: 0,
              duration: 0.5,
              delay: i * 0.15,
              ease: 'power2.out',
              scrollTrigger: {
                trigger: card,
                start: 'top 95%',
                toggleActions: 'play none none none'
              }
            }
          );
        });
      });
    </script>
  </body>
</html>
